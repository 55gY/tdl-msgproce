# tdl-msgproce 扩展配置文件
# 融合三个功能：消息监听 + Bot交互 + 转发

# ==================== Telegram Bot 配置 ====================
bot:
  enabled: true  # 是否启用 Bot 功能
  token: ""  # Bot Token
  
  # 允许使用的用户列表（留空表示所有用户都可以使用）
  allowed_users: [403917294,6170578211]  # 例如: [123456789, 987654321]
  
  # 转发目标
  forward_target: 1838605845  # 转发到这个 chat ID
  
  # 转发模式
  forward_mode: "clone"  # clone 或 copy

# ==================== 消息监听配置 ====================
monitor:
  enabled: true  # 是否启用消息监听功能
  
  # 订阅 API 配置
  subscription_api:
    api_key: "123456"                                          # API 密钥
    add_url: ""  # 添加订阅的完整 URL

  # 获取历史消息功能
  features:
    fetch_history_count: 500  # 获取历史消息数量（>0 则开启并获取指定数量，<=0 则关闭功能）

  # 要监听的频道ID列表
  channels:
    - 2582776039
    - 1338209352
    - 1965523384
    - 1914963500
    - 1695276861
    - 2817717177
    - 1313311705

  # 白名单频道 - 这些频道不经过二次内容过滤
  whitelist_channels:
    - 1313311705

  # 过滤配置
  filters:
    # 订阅格式过滤 - 订阅链接必须包含这些关键词之一，会进行二次内容过滤
    # 按协议长度降序排列，确保长协议优先匹配
    subs:
      - "https://"  # 5字符
      - "http://"   # 4字符
    # 节点格式过滤 - 全频道/群组 不受监听频道列表控制 - 节点链接必须匹配这些协议之一，不进行二次内容过滤
    # 按协议长度降序排列，确保长协议优先匹配（如 hysteria2 在 hysteria 前，ssr 在 ss 前）
    ss:
      - "hysteria2://"  # 9字符
      - "WireGuard://"  # 9字符
      - "hysteria://"   # 8字符
      - "juicity://"    # 7字符
      - "AnyTLS://"     # 6字符
      - "Mieru://"      # 5字符
      - "Snell://"      # 5字符
      - "SOCKS://"      # 5字符
      - "trojan://"     # 6字符
      - "vmess://"      # 5字符
      - "vless://"      # 5字符
      - "tuic://"       # 4字符
      - "ssr://"        # 3字符
      - "hy2://"        # 3字符
      - "ss://"         # 2字符
      - "Sudoku://"     # 6字符


    # 内容过滤 - 二次过滤，消息内容必须包含这些词之一
    content_filter:
      - "投稿"
      - "订阅"

    # 链接黑名单 - 包含这些关键字的链接不显示
    link_blacklist:
      - "register"
      - "t.me"
      - ".jpg"
      - ".jpeg"
      - ".png"
      - ".gif"
      - ".webp"
      - ".bmp"
      - "go1.569521.xyz"

# ==================== HTTP 代理配置 ====================
proxy:
  enabled: false               # 是否启用代理服务（默认关闭）
  host: "0.0.0.0"             # 监听地址（0.0.0.0 允许外部访问）
  port: 8080                  # 监听端口
  token: "your_secret_token"  # 访问密钥（请修改为强密码）
  timeout: 180                # 请求超时时间（秒）
  max_concurrent: 10          # 最大并发请求数

